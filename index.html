<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nicole te amo üíñ</title>
    <link rel="stylesheet" href="pink heart.css">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            overflow: hidden;
        }
        #carta {
            display: none;
            position: relative;
            z-index: 10;
        }
        #heart-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <iframe id="bg-music" width="0" height="0"
        src="https://www.youtube.com/embed/IVluKJqdEfE?autoplay=1&loop=1&playlist=IVluKJqdEfE"
        frameborder="0" allow="autoplay">
    </iframe>
    
    <canvas id="pinkboard"></canvas>
    <canvas id="heart-background"></canvas>
    
    <main id="carta">
        <div class="container-letter">
            <div class="cover"></div>
            <span class="heart">‚ô•</span>
            <p class="paper" id="mainMessage">
                Hoy, en San Valent√≠n, me tom√© un rato para escribirte. No te preocupes, no voy a ponerme todo meloso, pero s√≠ quiero aprovechar la ocasi√≥n para decirte algo que pienso todo el tiempo: me encanta c√≥mo eres.

Tus rizos, esa forma en que siempre logras que se vean perfectos, aunque s√© que detr√°s de eso hay algo de magia. Y el pollo en crema, ¬°ya te lo he dicho antes, pero es imposible no recordarlo cada vez que pienso en ti! Si existe un platillo hecho para ti, ese es el rey de los platos.

Los chocolates Granada, siempre te veo disfrut√°ndolos como si fueran lo m√°s delicioso del mundo, y me da gusto ver c√≥mo te emocionas con las cosas que te gustan. Y bueno, tus tenis para jugar tenis, siempre con esa energ√≠a y pasi√≥n, ¬°es imposible no admirarlo!

Solo quer√≠a aprovechar este d√≠a para recordarte lo genial que eres y lo mucho que me haces sonre√≠r. Te quiero mucho, Nicole, y me siento afortunado de tenerte cerca, haciendo que hasta lo m√°s sencillo se vuelva especial.

Feliz San Valent√≠n, y gracias por ser t√∫.  <3
            </p>
            <div class="letter"></div>
        </div>
        <div class="options">
            <button id="open">Abrir</button>
            <button id="close">Cerrar</button>
        </div>
    </main>
    
    <script src="pink heart.js"></script>
    <script>
        const urlSearchParams = new URLSearchParams(window.location.search);
        const messageCustom = urlSearchParams.get('message');
        if (messageCustom) {
            const mainMessageElement = document.querySelector('#mainMessage');
            mainMessageElement.textContent = decodeURI(messageCustom);
        }

        setTimeout(() => {
            document.getElementById("pinkboard").style.display = "none";
            document.getElementById("carta").style.display = "flex";
            startHeartBackground();
        }, 10000);

        const btnOpenElement = document.querySelector('#open');
        const btnCloseElement = document.querySelector('#close');
        btnCloseElement.disabled = true;

        btnOpenElement.addEventListener('click', () => {
            btnOpenElement.disabled = true;
            btnCloseElement.disabled = false;
            const coverElement = document.querySelector('.cover');
            coverElement.classList.add('open-cover');

            setTimeout(() => {
                coverElement.style.zIndex = -1;
                const paperElement = document.querySelector('.paper');
                paperElement.classList.remove('close-paper');
                paperElement.classList.add('open-paper');

                const heartElement = document.querySelector('.heart');
                heartElement.style.display = 'block';
            }, 500);
        });

        btnCloseElement.addEventListener('click', () => {
            btnOpenElement.disabled = false;
            btnCloseElement.disabled = true;
            const coverElement = document.querySelector('.cover');
            const paperElement = document.querySelector('.paper');
            paperElement.classList.remove('open-paper');
            paperElement.classList.add('close-paper');
            
            setTimeout(() => {
                coverElement.style.zIndex = 0;
                coverElement.classList.remove('open-cover');
                const heartElement = document.querySelector('.heart');
                heartElement.style.display = 'none';
            }, 500);
        });

        function startHeartBackground() {
            const canvas = document.getElementById("heart-background");
            const ctx = canvas.getContext("2d");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const hearts = [];

            for (let i = 0; i < 100; i++) {
                hearts.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 5 + 2,
                    speed: Math.random() * 1 + 0.2
                });
            }

            function drawHearts() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "rgba(255, 100, 150, 0.5)";
                hearts.forEach(heart => {
                    ctx.beginPath();
                    ctx.arc(heart.x, heart.y, heart.size, 0, Math.PI * 2);
                    ctx.fill();
                    heart.y += heart.speed;
                    if (heart.y > canvas.height) heart.y = 0;
                });
                requestAnimationFrame(drawHearts);
            }

            drawHearts();
        }
    </script>
</body>
</html>
